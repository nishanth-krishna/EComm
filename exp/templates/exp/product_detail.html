<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    </head>
    <body>
        {% if my_product %}

        <p><img src={{my_product.product_image_1.url}} height="200px" width="200px"></p>
        <p><b>{{my_product.product_name}}</b>: {{my_product.product_desciption}}</p>
        <p>Price : {{ my_product.selling_price }}</p>
        <form action="#">
            {% csrf_token %}
            <input type="hidden" value="{{my_product.id}}" id="prod_id">
            <input type="hidden" value="{{my_product.selling_price}}" id="prod_s_price">
            <button><a href="#" id="add_to_cart">Add to Cart</a></button><br>
        </form>
        <p id="come"></p>
        ---------------------------------------------
        {% else %}
        <p>no products</p>
        {% endif %}

        <script type="text/javascript">
            $(document).ready(function(){
                $('#add_to_cart').on('click', function(){
                    var prod_id = $('#prod_id').val();
                    var prod_s_price = $('#prod_s_price').val();
                    var token = $('input[name=csrfmiddlewaretoken]').val();

                    $('#come').html('ID is '+prod_id+' and price is '+prod_s_price)
                    console.log('clicked')

                    $.ajax({
                        method: 'POST',
                        url: '../add_to_cart',
                        data: {
                            'prod_id': prod_id,
                            'prod_s_price': prod_s_price,
                            csrfmiddlewaretoken: token 
                        },
                        dataType: 'dataType',
                        success: function (response) {
                            console.log('response')
                            console.log(response.status)
                        }
                    });

                });
            });
        </script>
    </body>
</html>